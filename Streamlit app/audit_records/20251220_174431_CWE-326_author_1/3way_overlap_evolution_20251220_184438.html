<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3-Way Tool Overlap Evolution Report</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
        }
        .chart-container {
            position: relative;
            height: 400px;
            margin: 30px 0;
        }
        .phase-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .phase-table th, .phase-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }
        .phase-table th {
            background-color: #3498db;
            color: white;
            font-weight: bold;
        }
        .phase-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .highlight-3way {
            background-color: #e8f8f5;
            font-weight: bold;
        }
        .legend {
            margin: 20px 0;
            padding: 15px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        .legend-item {
            display: inline-block;
            margin-right: 20px;
            margin-bottom: 10px;
        }
        .legend-color {
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-right: 5px;
            vertical-align: middle;
        }
        .summary-box {
            background-color: #e8f8f5;
            border-left: 4px solid #1abc9c;
            padding: 15px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ“Š 3-Way Tool Overlap Evolution Report</h1>
        <p><strong>Generated:</strong> 2025-12-20 18:45:24</p>
        
        <div class="summary-box">
            <h3>Report Purpose</h3>
            <p>This report tracks how vulnerability detection agreement between the three tools (Custom Detector, Bandit, Semgrep) 
            evolves across different phases of analysis. As code is patched, line numbers and vulnerability counts change, 
            which affects tool agreement.</p>
        </div>
        
        <h2>Evolution of Tool Agreement</h2>
        <div class="chart-container">
            <canvas id="overlapEvolutionChart"></canvas>
        </div>
        
        <h2>Total Vulnerabilities Detected Per Phase</h2>
        <div class="chart-container">
            <canvas id="totalVulnsChart"></canvas>
        </div>
        
        <h2>Detailed Phase-by-Phase Breakdown</h2>
        <table class="phase-table">
            <thead>
                <tr>
                    <th>Phase</th>
                    <th>Custom Total</th>
                    <th>Bandit Total</th>
                    <th>Semgrep Total</th>
                    <th class="highlight-3way">3-Way Overlap</th>
                    <th>Custom-Bandit</th>
                    <th>Custom-Semgrep</th>
                    <th>Bandit-Semgrep</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Initial Code</strong></td>
                    <td>0</td>
                    <td>1</td>
                    <td>1</td>
                    <td class="highlight-3way">0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                </tr>
                <tr>
                    <td><strong>After Iteration 1</strong></td>
                    <td>0</td>
                    <td>1</td>
                    <td>1</td>
                    <td class="highlight-3way">0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                </tr>
                <tr>
                    <td><strong>After Iteration 2</strong></td>
                    <td>0</td>
                    <td>1</td>
                    <td>1</td>
                    <td class="highlight-3way">0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                </tr>
                <tr>
                    <td><strong>Final Code</strong></td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td class="highlight-3way">0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                </tr>
            </tbody>
        </table>

        <h2>Overlap Details by Phase (CWE IDs)</h2>
        <table class="phase-table">
            <thead>
                <tr>
                    <th>Phase</th>
                    <th>3-Way (Custom âˆ© Bandit âˆ© Semgrep)</th>
                    <th>Custom âˆ© Bandit</th>
                    <th>Custom âˆ© Semgrep</th>
                    <th>Bandit âˆ© Semgrep</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Initial Code</strong></td>
                    <td>â€“</td>
                    <td>â€“</td>
                    <td>â€“</td>
                    <td>â€“</td>
                </tr>
                <tr>
                    <td><strong>After Iteration 1</strong></td>
                    <td>â€“</td>
                    <td>â€“</td>
                    <td>â€“</td>
                    <td>â€“</td>
                </tr>
                <tr>
                    <td><strong>After Iteration 2</strong></td>
                    <td>â€“</td>
                    <td>â€“</td>
                    <td>â€“</td>
                    <td>â€“</td>
                </tr>
                <tr>
                    <td><strong>Final Code</strong></td>
                    <td>â€“</td>
                    <td>â€“</td>
                    <td>â€“</td>
                    <td>â€“</td>
                </tr>
            </tbody>
        </table>
        
        <div class="legend">
            <h3>Legend</h3>
            <div class="legend-item">
                <span class="legend-color" style="background-color: #1abc9c;"></span>
                <strong>3-Way Overlap:</strong> CWEs detected by all three tools
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background-color: #3498db;"></span>
                <strong>Custom-Bandit:</strong> CWEs detected by Custom and Bandit only
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background-color: #9b59b6;"></span>
                <strong>Custom-Semgrep:</strong> CWEs detected by Custom and Semgrep only
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background-color: #e74c3c;"></span>
                <strong>Bandit-Semgrep:</strong> CWEs detected by Bandit and Semgrep only
            </div>
        </div>
        
        <h2>Key Insights</h2>
        <ul>
            <li><strong>3-Way Agreement Change:</strong> From 0 CWEs (initial) to 0 CWEs (final) - 
            unchanged by 0 CWEs</li>
            <li><strong>Custom Detector:</strong> 0 vulnerabilities initially â†’ 0 finally</li>
            <li><strong>Bandit:</strong> 1 vulnerabilities initially â†’ 0 finally</li>
            <li><strong>Semgrep:</strong> 1 vulnerabilities initially â†’ 0 finally</li>
        </ul>
        
        <script>
            // Overlap Evolution Chart
            const ctx1 = document.getElementById('overlapEvolutionChart').getContext('2d');
            new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: ['Initial', 'Iter 1', 'Iter 2', 'Final'],
                    datasets: [
                        {
                            label: '3-Way Overlap (All Tools)',
                            data: [0, 0, 0, 0],
                            borderColor: '#1abc9c',
                            backgroundColor: 'rgba(26, 188, 156, 0.1)',
                            borderWidth: 3,
                            tension: 0.1
                        },
                        {
                            label: 'Custom-Bandit Overlap',
                            data: [0, 0, 0, 0],
                            borderColor: '#3498db',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            borderWidth: 2,
                            tension: 0.1
                        },
                        {
                            label: 'Custom-Semgrep Overlap',
                            data: [0, 0, 0, 0],
                            borderColor: '#9b59b6',
                            backgroundColor: 'rgba(155, 89, 182, 0.1)',
                            borderWidth: 2,
                            tension: 0.1
                        },
                        {
                            label: 'Bandit-Semgrep Overlap',
                            data: [0, 0, 0, 0],
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            borderWidth: 2,
                            tension: 0.1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Tool Agreement Evolution Across Phases',
                            font: { size: 16 }
                        },
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of CWEs'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Analysis Phase'
                            }
                        }
                    }
                }
            });
            
            // Total Vulnerabilities Chart
            const ctx2 = document.getElementById('totalVulnsChart').getContext('2d');
            new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ['Initial', 'Iter 1', 'Iter 2', 'Final'],
                    datasets: [
                        {
                            label: 'Custom Detector',
                            data: [0, 0, 0, 0],
                            backgroundColor: 'rgba(52, 152, 219, 0.7)'
                        },
                        {
                            label: 'Bandit',
                            data: [1, 1, 1, 0],
                            backgroundColor: 'rgba(231, 76, 60, 0.7)'
                        },
                        {
                            label: 'Semgrep',
                            data: [1, 1, 1, 0],
                            backgroundColor: 'rgba(155, 89, 182, 0.7)'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Total Vulnerabilities Per Tool Per Phase',
                            font: { size: 16 }
                        },
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Vulnerabilities'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Analysis Phase'
                            }
                        }
                    }
                }
            });
        </script>
    </div>
</body>
</html>